{
"version":3,
"file":"index.js",
"sourceRoot":"file:///",
"sources":["/Users/matthijs/Documents/workingdir/haxe/hxskeletor/src/MainHeroku.hx","/usr/local/lib/haxe/std/js/_std/Std.hx","/usr/local/lib/haxe/std/js/Boot.hx","/Users/matthijs/Documents/workingdir/haxe/hxskeletor/src/server/Controller.hx","/Users/matthijs/Documents/workingdir/haxe/hxskeletor/src/server/Router.hx","/Users/matthijs/Documents/workingdir/haxe/hxskeletor/src/model/constants/App.hx"],
"sourcesContent":["package;\n\nimport js.Node.*;\nimport js.Node;\nimport js.Node.console;\n\nimport js.node.Fs;\nimport js.node.Path;\nimport js.node.Require;\n\nimport js.npm.SocketIo;\nimport js.npm.Request;\n\nimport js.npm.Express;\nimport js.npm.express.*;\nimport js.npm.express.Request;\nimport js.npm.express.Response;\n\nimport model.constants.App;\nimport server.Router;\n\nimport haxe.Timer;\nusing StringTools;\n\n/**\n * @author Matthijs Kamstra aka [mck]\n * MIT\n */\nclass MainHeroku {\n\n\tvar app : js.npm.Express;\n\tvar server : js.node.http.Server;\n\tpublic static var io : js.npm.socketio.Server;\n\n\n\tpublic function new () {\n\t\tconsole.log('${App.PROJECT_NAME} build: ${App.BUILD}');\n\n\t\ttrace('${App.PROJECT_NAME} start Heroku server');\n\n\t\tvar port = Sys.getEnv(\"PORT\");\n\t\tif(port == null) port = App.PORT;\n\t\ttrace('port: $port');\n\n\t\tapp    = new js.npm.Express();\n\t\tserver = js.node.Http.createServer( cast app );\n\t\tio     = new js.npm.socketio.Server(server);\n\n\t\t// setup\n\t\t// app.set('port', port);\n\n\t\t// use\n\t\tapp.use(new Favicon(Node.__dirname + '/favicon.ico'));\t\t\t// because I like favicons\n\t\tapp.use(new Morgan('dev'));\t\t\t\t\t\t\t\t\t\t// set morgan to log info about our requests for development use.\n\t\tapp.use(BodyParser.json());\t\t\t\t\t\t\t\t\t\t// support json encoded bodies\n\t\tapp.use(BodyParser.urlencoded({ extended: true }));\t\t\t\t// initialize body-parser to parse incoming parameters requests to req.body\n\t\tapp.use(new Static(Path.join(Node.__dirname, 'public')));\n\t\tapp.use(new CookieParser());\t\t\t\t\t\t\t\t\t// initialize cookie-parser to allow us access the cookies stored in the browser.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// initialize express-session to allow us track the logged-in user across sessions.\n\t\tapp.use(new Session({\n\t\t\tsecret: 'example',\n\t\t\tresave: true,\n    \t\tsaveUninitialized: true\n\t\t}));\n\t\t// app.use(untyped checkAuth ); \t\t\t\t\t\t\t\t// need to fix this in the externs\n\n\t\t// Routes\n\t\tRouter.init(app); \t\t\t\t\t\t\t\t\t\t\t\t// need to fix this in the externs\n\n\t\t// socket stuff\n\t\tio.on('connection', function (socket) {\n\n\t\t\tsocket.emit('message', { message: 'Welcome from the Heroku server - ${App.PROJECT_NAME}' });\n\t\t\tsocket.on('send', function (data:Dynamic) {\n\t\t\t\tio.sockets.emit('id', data.id);\n\t\t\t\ttrace('send data -> ' + data.id);\n\t\t\t});\n\t\t\tsocket.on('disconnect', function (data:Dynamic) {\n        \t\tconsole.log('user disconnected');\n    \t\t});\n\t\t\t// socket.on('ping', function(data:Dynamic) {\n\t\t\t// \ttrace('got a ping');\n    \t\t// \tio.sockets.emit('pong');\n  \t\t\t// });\n\t\t});\n\n\t\t// use this last...\n\t\tapp.use(function(req, res, next) {\n\t\t\tres.status(404).send('404');\n\t\t\t// res.status(404).send(output);\n\t\t});\n\n\t\t// server.listen(app.get('port'));\n\t\t// trace('Listening on port: ${app.get('port')} (http://localhost:${app.get('port')})');\n\t\tserver.listen(port);\n\t\ttrace('Listening on port: ${port} (http://localhost:${port})');\n\t}\n\n\tfunction checkAuth (req:Dynamic, res, next) {\n\t\tconsole.log('checkAuth ' + req.url);\n\t\t// don't serve /secure to those not logged in\n\t\t// you should add to this list, for each and every secure url\n\t\tif (req.url == '/secure' && (req.session == null || req.session.authenticated != true)) {\n\t\t\tres.redirect('/login');\n\t\t\t// res.status(404).send('404');\n\t\t\treturn;\n\t\t}\n\t\tnext();\n\t}\n\n\tstatic public function main () {\n\t\tvar app = new MainHeroku ();\n\t}\n}\n\n\n\n","/*\n * Copyright (C)2005-2017 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\nimport js.Boot;\n\n@:keepInit\n@:coreApi class Std {\n\n\tpublic static inline function is( v : Dynamic, t : Dynamic ) : Bool {\n\t\treturn untyped js.Boot.__instanceof(v,t);\n\t}\n\n\tpublic static inline function instance<T:{},S:T>( value : T, c : Class<S> ) : S {\n\t\treturn untyped __instanceof__(value, c) ? cast value : null;\n\t}\n\n\t@:pure\n\tpublic static function string( s : Dynamic ) : String {\n\t\treturn untyped js.Boot.__string_rec(s,\"\");\n\t}\n\n\tpublic static inline function int( x : Float ) : Int {\n\t\treturn (cast x) | 0;\n\t}\n\n\t@:pure\n\tpublic static function parseInt( x : String ) : Null<Int> {\n\t\tvar v = untyped __js__(\"parseInt\")(x, 10);\n\t\t// parse again if hexadecimal\n\t\tif( v == 0 && (x.charCodeAt(1) == 'x'.code || x.charCodeAt(1) == 'X'.code) )\n\t\t\tv = untyped __js__(\"parseInt\")(x);\n\t\tif( untyped __js__(\"isNaN\")(v) )\n\t\t\treturn null;\n\t\treturn cast v;\n\t}\n\n\tpublic static inline function parseFloat( x : String ) : Float {\n\t\treturn untyped __js__(\"parseFloat\")(x);\n\t}\n\n\tpublic static function random( x : Int ) : Int {\n\t\treturn x <= 0 ? 0 : Math.floor(Math.random()*x);\n\t}\n\n\tstatic function __init__() : Void untyped {\n\t\t__feature__(\"js.Boot.getClass\",String.prototype.__class__ = __feature__(\"Type.resolveClass\",$hxClasses[\"String\"] = String,String));\n\t\t__feature__(\"js.Boot.isClass\",String.__name__ = __feature__(\"Type.getClassName\",[\"String\"],true));\n\t\t__feature__(\"Type.resolveClass\",$hxClasses[\"Array\"] = Array);\n\t\t__feature__(\"js.Boot.isClass\",Array.__name__ = __feature__(\"Type.getClassName\",[\"Array\"],true));\n\t\t__feature__(\"Date.*\", {\n\t\t\t__feature__(\"js.Boot.getClass\",__js__('Date').prototype.__class__ = __feature__(\"Type.resolveClass\",$hxClasses[\"Date\"] = __js__('Date'),__js__('Date')));\n\t\t\t__feature__(\"js.Boot.isClass\",__js__('Date').__name__ = [\"Date\"]);\n\t\t});\n\t\t__feature__(\"Int.*\",{\n\t\t\tvar Int = __feature__(\"Type.resolveClass\", $hxClasses[\"Int\"] = { __name__ : [\"Int\"] }, { __name__ : [\"Int\"] });\n\t\t});\n\t\t__feature__(\"Dynamic.*\",{\n\t\t\tvar Dynamic = __feature__(\"Type.resolveClass\", $hxClasses[\"Dynamic\"] = { __name__ : [\"Dynamic\"] }, { __name__ : [\"Dynamic\"] });\n\t\t});\n\t\t__feature__(\"Float.*\",{\n\t\t\tvar Float = __feature__(\"Type.resolveClass\", $hxClasses[\"Float\"] = __js__(\"Number\"), __js__(\"Number\"));\n\t\t\tFloat.__name__ = [\"Float\"];\n\t\t});\n\t\t__feature__(\"Bool.*\",{\n\t\t\tvar Bool = __feature__(\"Type.resolveEnum\",$hxClasses[\"Bool\"] = __js__(\"Boolean\"), __js__(\"Boolean\"));\n\t\t\tBool.__ename__ = [\"Bool\"];\n\t\t});\n\t\t__feature__(\"Class.*\",{\n\t\t\tvar Class = __feature__(\"Type.resolveClass\", $hxClasses[\"Class\"] = { __name__ : [\"Class\"] }, { __name__ : [\"Class\"] });\n\t\t});\n\t\t__feature__(\"Enum.*\",{\n\t\t\tvar Enum = {};\n\t\t});\n\t\t__feature__(\"Void.*\",{\n\t\t\tvar Void = __feature__(\"Type.resolveEnum\", $hxClasses[\"Void\"] = { __ename__ : [\"Void\"] }, { __ename__ : [\"Void\"] });\n\t\t});\n\n#if (js_es < 5)\n\t\t__feature__(\"Array.map\",\n\t\t\tif( Array.prototype.map == null )\n\t\t\t\tArray.prototype.map = function(f) {\n\t\t\t\t\tvar a = [];\n\t\t\t\t\tfor( i in 0...__this__.length )\n\t\t\t\t\t\ta[i] = f(__this__[i]);\n\t\t\t\t\treturn a;\n\t\t\t\t}\n\t\t);\n\t\t__feature__(\"Array.filter\",\n\t\t\tif( Array.prototype.filter == null )\n\t\t\t\tArray.prototype.filter = function(f) {\n\t\t\t\t\tvar a = [];\n\t\t\t\t\tfor( i in 0...__this__.length ) {\n\t\t\t\t\t\tvar e = __this__[i];\n\t\t\t\t\t\tif( f(e) ) a.push(e);\n\t\t\t\t\t}\n\t\t\t\t\treturn a;\n\t\t\t\t}\n\t\t);\n#end\n\t}\n\n}\n","/*\n * Copyright (C)2005-2017 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\npackage js;\n\nprivate class HaxeError extends js.Error {\n\n\tvar val:Dynamic;\n\n\tpublic function new(val:Dynamic) untyped {\n\t\tsuper();\n\t\tthis.val = __define_feature__(\"js.Boot.HaxeError\", val);\n\t\tthis.message = String(val);\n\t\tif (js.Error.captureStackTrace) js.Error.captureStackTrace(this, HaxeError);\n\t}\n\n\tpublic static function wrap(val:Dynamic):Dynamic untyped {\n\t\treturn if (__instanceof__(val, js.Error)) val else new HaxeError(val);\n\t}\n}\n\n@:dox(hide)\nclass Boot {\n\n\tprivate static function __unhtml(s : String) {\n\t\treturn s.split(\"&\").join(\"&amp;\").split(\"<\").join(\"&lt;\").split(\">\").join(\"&gt;\");\n\t}\n\n\tprivate static function __trace(v,i : haxe.PosInfos) {\n\t\tuntyped {\n\t\t\tvar msg = if( i != null ) i.fileName+\":\"+i.lineNumber+\": \" else \"\";\n\t\t\t#if jsfl\n\t\t\tmsg += __string_rec(v,\"\");\n\t\t\tfl.trace(msg);\n\t\t\t#else\n\t\t\tmsg += __string_rec(v, \"\");\n\t\t\tif( i != null && i.customParams != null )\n\t\t\t\tfor( v in i.customParams )\n\t\t\t\t\tmsg += \",\" + __string_rec(v, \"\");\n\t\t\tvar d;\n\t\t\tif( __js__(\"typeof\")(document) != \"undefined\" && (d = document.getElementById(\"haxe:trace\")) != null )\n\t\t\t\td.innerHTML += __unhtml(msg)+\"<br/>\";\n\t\t\telse if( __js__(\"typeof console\") != \"undefined\" && __js__(\"console\").log != null )\n\t\t\t\t__js__(\"console\").log(msg);\n\t\t\t#end\n\t\t}\n\t}\n\n\tprivate static function __clear_trace() {\n\t\tuntyped {\n\t\t\t#if jsfl\n\t\t\tfl.outputPanel.clear();\n\t\t\t#else\n\t\t\tvar d = document.getElementById(\"haxe:trace\");\n\t\t\tif( d != null )\n\t\t\t\td.innerHTML = \"\";\n\t\t\t#end\n\t\t}\n\t}\n\n\tstatic inline function isClass(o:Dynamic) : Bool {\n\t\treturn untyped __define_feature__(\"js.Boot.isClass\", o.__name__);\n\t}\n\n\tstatic inline function isEnum(e:Dynamic) : Bool {\n\t\treturn untyped __define_feature__(\"js.Boot.isEnum\", e.__ename__);\n\t}\n\n\tstatic function getClass(o:Dynamic) : Dynamic {\n\t\tif (Std.is(o, Array))\n\t\t\treturn Array;\n\t\telse {\n\t\t\tvar cl = untyped __define_feature__(\"js.Boot.getClass\", o.__class__);\n\t\t\tif (cl != null)\n\t\t\t\treturn cl;\n\t\t\tvar name = __nativeClassName(o);\n\t\t\tif (name != null)\n\t\t\t\treturn __resolveNativeClass(name);\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t@:ifFeature(\"has_enum\")\n\tprivate static function __string_rec(o,s:String) {\n\t\tuntyped {\n\t\t\tif( o == null )\n\t\t\t    return \"null\";\n\t\t\tif( s.length >= 5 )\n\t\t\t\treturn \"<...>\"; // too much deep recursion\n\t\t\tvar t = __js__(\"typeof(o)\");\n\t\t\tif( t == \"function\" && (isClass(o) || isEnum(o)) )\n\t\t\t\tt = \"object\";\n\t\t\tswitch( t ) {\n\t\t\tcase \"object\":\n\t\t\t\tif( __js__(\"o instanceof Array\") ) {\n\t\t\t\t\tif( o.__enum__ ) {\n\t\t\t\t\t\tif( o.length == 2 )\n\t\t\t\t\t\t\treturn o[0];\n\t\t\t\t\t\tvar str = o[0]+\"(\";\n\t\t\t\t\t\ts += \"\\t\";\n\t\t\t\t\t\tfor( i in 2...o.length ) {\n\t\t\t\t\t\t\tif( i != 2 )\n\t\t\t\t\t\t\t\tstr += \",\" + __string_rec(o[i],s);\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tstr += __string_rec(o[i],s);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn str + \")\";\n\t\t\t\t\t}\n\t\t\t\t\tvar l = o.length;\n\t\t\t\t\tvar i;\n\t\t\t\t\tvar str = \"[\";\n\t\t\t\t\ts += \"\\t\";\n\t\t\t\t\tfor( i in 0...l )\n\t\t\t\t\t\tstr += (if (i > 0) \",\" else \"\")+__string_rec(o[i],s);\n\t\t\t\t\tstr += \"]\";\n\t\t\t\t\treturn str;\n\t\t\t\t}\n\t\t\t\tvar tostr;\n\t\t\t\ttry {\n\t\t\t\t\ttostr = untyped o.toString;\n\t\t\t\t} catch( e : Dynamic ) {\n\t\t\t\t\t// strange error on IE\n\t\t\t\t\treturn \"???\";\n\t\t\t\t}\n\t\t\t\tif( tostr != null && tostr != __js__(\"Object.toString\") && __typeof__(tostr) == \"function\" ) {\n\t\t\t\t\tvar s2 = o.toString();\n\t\t\t\t\tif( s2 != \"[object Object]\")\n\t\t\t\t\t\treturn s2;\n\t\t\t\t}\n\t\t\t\tvar k : String = null;\n\t\t\t\tvar str = \"{\\n\";\n\t\t\t\ts += \"\\t\";\n\t\t\t\tvar hasp = (o.hasOwnProperty != null);\n\t\t\t\t__js__(\"for( var k in o ) {\");\n\t\t\t\t\tif( hasp && !o.hasOwnProperty(k) )\n\t\t\t\t\t\t__js__(\"continue\");\n\t\t\t\t\tif( k == \"prototype\" || k == \"__class__\" || k == \"__super__\" || k == \"__interfaces__\" || k == \"__properties__\" )\n\t\t\t\t\t\t__js__(\"continue\");\n\t\t\t\t\tif( str.length != 2 )\n\t\t\t\t\t\tstr += \", \\n\";\n\t\t\t\t\tstr += s + k + \" : \"+__string_rec(o[k],s);\n\t\t\t\t__js__(\"}\");\n\t\t\t\ts = s.substring(1);\n\t\t\t\tstr += \"\\n\" + s + \"}\";\n\t\t\t\treturn str;\n\t\t\tcase \"function\":\n\t\t\t\treturn \"<function>\";\n\t\t\tcase \"string\":\n\t\t\t\treturn o;\n\t\t\tdefault:\n\t\t\t\treturn String(o);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate static function __interfLoop(cc : Dynamic,cl : Dynamic) {\n\t\tif( cc == null )\n\t\t\treturn false;\n\t\tif( cc == cl )\n\t\t\treturn true;\n\t\tvar intf : Dynamic = cc.__interfaces__;\n\t\tif( intf != null )\n\t\t\tfor( i in 0...intf.length ) {\n\t\t\t\tvar i : Dynamic = intf[i];\n\t\t\t\tif( i == cl || __interfLoop(i,cl) )\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\treturn __interfLoop(cc.__super__,cl);\n\t}\n\n\t@:ifFeature(\"typed_catch\") private static function __instanceof(o : Dynamic,cl : Dynamic) {\n\t\tif( cl == null )\n\t\t\treturn false;\n\t\tswitch( cl ) {\n\t\tcase Int:\n\t\t\treturn (untyped __js__(\"typeof\"))(o) == \"number\" && untyped __js__(\"(o|0) === o\");\n\t\tcase Float:\n\t\t\treturn (untyped __js__(\"typeof\"))(o) == \"number\";\n\t\tcase Bool:\n\t\t\treturn (untyped __js__(\"typeof\"))(o) == \"boolean\";\n\t\tcase String:\n\t\t\treturn (untyped __js__(\"typeof\"))(o) == \"string\";\n\t\tcase Array:\n\t\t\treturn (untyped __js__(\"(o instanceof Array)\")) && o.__enum__ == null;\n\t\tcase Dynamic:\n\t\t\treturn true;\n\t\tdefault:\n\t\t\tif( o != null ) {\n\t\t\t\t// Check if o is an instance of a Haxe class or a native JS object\n\t\t\t\tif( (untyped __js__(\"typeof\"))(cl) == \"function\" ) {\n\t\t\t\t\tif( untyped __js__(\"o instanceof cl\") )\n\t\t\t\t\t\treturn true;\n\t\t\t\t\tif( __interfLoop(getClass(o),cl) )\n\t\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\telse if ( (untyped __js__(\"typeof\"))(cl) == \"object\" && __isNativeObj(cl) ) {\n\t\t\t\t\tif( untyped __js__(\"o instanceof cl\") )\n\t\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t// do not use isClass/isEnum here\n\t\t\tuntyped __feature__(\"Class.*\",if( cl == Class && o.__name__ != null ) return true);\n\t\t\tuntyped __feature__(\"Enum.*\",if( cl == Enum && o.__ename__ != null ) return true);\n\t\t\treturn o.__enum__ == cl;\n\t\t}\n\t}\n\n\t@:ifFeature(\"typed_cast\") private static function __cast(o : Dynamic, t : Dynamic) {\n\t\tif (__instanceof(o, t)) return o;\n\t\telse throw \"Cannot cast \" +Std.string(o) + \" to \" +Std.string(t);\n\t}\n\n\tstatic var __toStr = untyped ({}).toString;\n\t// get native JS [[Class]]\n\tstatic function __nativeClassName(o:Dynamic):String {\n\t\tvar name = untyped __toStr.call(o).slice(8, -1);\n\t\t// exclude general Object and Function\n\t\t// also exclude Math and JSON, because instanceof cannot be called on them\n\t\tif (name == \"Object\" || name == \"Function\" || name == \"Math\" || name == \"JSON\")\n\t\t\treturn null;\n\t\treturn name;\n\t}\n\n\t// check for usable native JS object\n\tstatic function __isNativeObj(o:Dynamic):Bool {\n\t\treturn __nativeClassName(o) != null;\n\t}\n\n\t// resolve native JS class in the global scope:\n\tstatic function __resolveNativeClass(name:String) {\n\t\treturn untyped js.Lib.global[name];\n\t}\n\n}\n","package server;\n\nimport js.Node;\nimport js.node.Fs;\nimport js.npm.express.*;\n\nimport js.Node.console;\n\nimport model.constants.App;\n\n// import msignal.Signal;\n\nclass Controller {\n\n\tpublic static function index(req:Request,res:Response) {\n\t\tres.sendfile(Node.__dirname + '/public/_index.html');\n\t}\n\n\tpublic static function logout(req:Request,res:Response) {\n\t\t// res.sendfile(Node.__dirname + '/public/login.html');\n\t\tres.redirect('/');\n\t}\n\tpublic static function login(req:Request,res:Response) {\n\t\tres.sendfile(Node.__dirname + '/public/login.html');\n\t}\n\tpublic static function loginPost(req:Request,res:Response) {\n\t\tres.sendfile(Node.__dirname + '/public/secure.html');\n\t}\n\n\tpublic static function api(req:Request,res:Response) {\n\t\tres.send('api: ${App.BUILD}');\n\t}\n\tpublic static function apiPost(req:Request,res:Response) {\n\t\tconsole.log('api');\n\t\tconsole.log(req);\n\t\tconsole.log(res);\n\t\t// console.log(res.body);\n\t\t// console.log(req.body);\n\t}\n\n\tpublic static function test(req:Request,res:Response) {\n\t\tres.sendfile(Node.__dirname + '/public/test.html');\n\t}\n\tpublic static function ping(req:Request,res:Response) {\n\t\tres.send('test:ping');\n\t\tvar io = MainHeroku.io;\n\t\tio.sockets.emit('test:ping', App.PROJECT_NAME);\n\t}\n\tpublic static function version(req:Request,res:Response) {\n\t\tres.send('version: ${App.BUILD}');\n\t\tvar io = MainHeroku.io;\n\t\tio.sockets.emit('version', App.BUILD);\n\t}\n\tpublic static function secure(req:Request,res:Response) {\n\t\t// res.send('secure: ${App.BUILD}');\n\t\tres.sendfile(Node.__dirname + '/public/secure.html');\n\t\tvar io = MainHeroku.io;\n\t\tio.sockets.emit('version', App.BUILD);\n\t}\n\tpublic static function update(req:Request,res:Response) {\n\t\tres.send('update: ${App.BUILD}');\n\t\tvar io = MainHeroku.io;\n\t\tio.sockets.emit('update', App.BUILD);\n\t}\n\n\n\n\t// // gitlab\n\t// public static function githubProjects(req,res){\n\t// \tvar _url = Node.__dirname +  '/_data/${Folder.GITLAB}/gitlab_projects.json';\n\t// \tres.send(haxe.Json.parse(Fs.readFileSync(_url, \"utf8\")));\n\t// };\n\t// public static function githubProjectsId(req,res){\n\t// \tvar _url = Node.__dirname +  '/_data/gitlab.json';\n\t// \tres.send(Fs.readFileSync(_url, \"utf8\"));\n\t// };\n\t// public static function githubIssuesById(req,res){\n\t// \t// res.send('githubIssuesById: ${req.params.id}');\n\n\t// \tvar _id = req.params.id;\n\t// \tvar _url = Node.__dirname +  '/_data/${Folder.GITLAB}/gitlab_project_issues_${_id}.json';\n\t// \tres.send(haxe.Json.parse(Fs.readFileSync(_url, \"utf8\")));\n\n\t// };\n\n\t// // tenk\n\t// public static function tenkProjects(req,res){\n\t// \tvar _url = Node.__dirname +  '/_data/${Folder.TENK}/projects.json';\n\t// \tres.send(Fs.readFileSync(_url, \"utf8\"));\n\t// };\n\t// public static function tenkProjectsId(req,res){\n\t// \tvar _url = Node.__dirname +  '/_data/tenk.json';\n\t// \tres.send(Fs.readFileSync(_url, \"utf8\"));\n\t// };\n\t// public static function tenkById(req,res){\n\t// \tres.send('tenkById: ${req.params.id}');\n\t// };\n\t// public static function tenkPhasesById(req,res){\n\t// \tvar _id = req.params.id;\n\t// \tvar _url = Node.__dirname +  '/_data/${Folder.TENK}/${_id}_phases.json';\n\t// \tres.send(Fs.readFileSync(_url, \"utf8\"));\n\t// };\n\t// public static function tenkBudgetById(req,res){\n\t// \tvar _id = req.params.id;\n\t// \tvar _url = Node.__dirname +  '/_data/${Folder.TENK}/${_id}_budget.json';\n\t// \tres.send(Fs.readFileSync(_url, \"utf8\"));\n\t// };\n\t// public static function tenkTimeById(req,res){\n\t// \tvar _id = req.params.id;\n\t// \tvar _url = Node.__dirname +  '/_data/${Folder.TENK}/${_id}_time_entries.json';\n\t// \tres.send(Fs.readFileSync(_url, \"utf8\"));\n\t// };\n\n\n}","package server;\n\nimport js.npm.Express;\n\nclass Router {\n\n\tpublic static function init(app : Express):Void\n\t{\n\t\tapp.get('/', Controller.index);\n\t\tapp.get('/secure', Controller.secure);\n\t\tapp.get('/ping', Controller.ping);\n\t\tapp.get('/update', Controller.update);\n\t\tapp.get('/version', Controller.version);\n\n\t\tapp.get('/logout', Controller.logout);\n\t\tapp.get('/login', Controller.login);\n\t\tapp.post('/login', Controller.loginPost);\n\n\t\tapp.get('/api', Controller.api);\n\t\tapp.post('/api', Controller.apiPost);\n\n\n\t\t// // test app\n\t\t// app.get('/test', Controller.test);\n\t\t// app.get('/test/id', Controller.testId);\n\t\t// app.get('/test/:id', Controller.testById);\n\t\t// app.get('/test/foo/:id', Controller.testFooById);\n\n\t\t// app.get('/secure', function (req, res, next) {\n\t\t// \tres.sendfile(Node.__dirname + '/public/secure.html');\n\t\t// });\n\t\t// app.get('/login', function (req, res, next) {\n\t\t// \tres.sendfile(Node.__dirname + '/public/login.html');\n\t\t// });\n\t\t// app.post('/login', function (req, res, next) {\n\n\t\t// \ttrace(req);\n\t\t// \ttrace(res);\n\t\t// \ttrace(next);\n\n\t\t// \t// you might like to do a database look-up or something more scalable here\n\t\t// \tif (req.body.username != null && req.body.username == 'user' && req.body.password != null && req.body.password == 'pass') {\n\t\t// \t\treq.session.authenticated = true;\n\t\t// \t\tres.redirect('/secure');\n\t\t// \t} else {\n\t\t// \t\t// req.flash('error', 'Username and password are incorrect');\n\t\t// \t\tres.redirect('/login');\n\t\t// \t}\n\n\t\t// });\n\n\t\t// app.get('/api', function (req:js.npm.express.Request, res:Response) {\n\t\t// \tres.send('api: ${App.BUILD}');\n\t\t// });\n\t\t// app.post('/api', function (req, res:Response) {\n\t\t// \tconsole.log('api');\n\t\t// \t// console.log(req);\n\t\t// \t// console.log(res);\n\t\t// \t// console.log(res.body);\n\t\t// \tconsole.log(req.body);\n\t\t// });\n\n\t}\n}","package model.constants;\n\nimport haxe.macro.Context;\n\nclass App {\n\n\tpublic static inline var PROJECT_NAME : String  = \"[Skeletor]\";\n\n\tpublic static inline var URL : String  = \"https://skeletor.herokuapp.com/\";\n\tpublic static inline var PORT : String  = \"5000\";\n\n\tpublic static var BUILD : String = getBuildDate();\n\n\tmacro public static function getBuildDate() {\n\t\tvar date = Date.now().toString();\n\t\treturn Context.makeExpr(date, Context.currentPos());\n\t}\n\n}"],
"names":[],
"mappings":"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"
}